{% load static %}

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prompt Writer</title>
    <!-- use bootstrap UI -->
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <!-- base layout -->
    <link rel="stylesheet" href="{% static 'css/sharedsteps.css' %}" />
    
    <script src="{% static 'js/jquery-3.7.1.js'%}"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://kit.fontawesome.com/95a71e9646.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.1/Sortable.min.js" integrity="sha512-3N7dD+tlndNxwAC0PwGNWnnEpzHQwgNl6/c9XW6+nqptoMhbI9Rb6kQiUFtYmXrox60oIELVSFAO0dCSfKb2tw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-sortablejs@latest/jquery-sortable.js"></script>
    
    
</head>

<body class="container-none h-screen w-screen px-8">

    <!-- 
      The <noscript> tag encloses the content that will be displayed 
      only if JavaScript is disabled or not supported in the user's browser. 
    -->
    <noscript>
        If you see this text, your browser does not support dynamic content
        (JavaScript) or it has been disabled. This study website requires JavaScript.
    </noscript> 
    {% csrf_token %}
    <div x-data="{}" class="flex flex-col justify-start gap-y-4 py-3 items-stretch h-full">
        <div class="mx-auto pb-1 flex-grow-0">
            <h1 class="text-3xl font-semibold text-gray-800">Welcome to the Prompt Writer</h1>
        </div>

        <div class="flex items-stretch w-full gap-x-4 flex-grow">
            <!-- the section where users configure prompts -->
            <div x-data="" class="flex flex-col items-stretch gap-y-4 pt-2 px-4 border border-gray-600 rounded w-1/2 flex-grow">
                <!-- <div class="section-header text-xl font-bold text-blue-600 flex-grow-0 self-center">
                Write Your Prompts
            </div> -->

                <!-- the section where users see all prompts -->
                <div class="section-body flex flex-col flex-grow gap-y-4 pb-4">
                    <!-- <div class="flex flex-col gap-y-2 flex-grow-0">
                        <div class="text-lg italic">
                            Prompt Introduction
                        </div>
                        <textarea rows="2" id="promptOverview" class="bg-gray-100 border border-gray-300 rounded-lg p-2 text-base w-full" placeholder="Write an overview of your prompt"></textarea>
                    </div> -->
                    <div id="promptList" class="flex flex-col gap-y-2 flex-grow h-1 overflow-y-auto">
                        <div @click="addNewPrompt" class="addButton flex justify-center items-center gap-x-4 border border-gray-300 rounded-lg h-10 cursor-pointer">
                            <div class="text-3xl text-gray-500">+</div>
                        </div>
                    </div>
                    <div class="bottom flex justify-end gap-x-2 flex-grow-0">
                        <button @click="trainLLM();" class="bg-emerald-500 text-white font-bold py-2 px-3 rounded">
                            Try filtering
                        </button>
                        <button @click="complete();" class="bg-blue-600  text-white font-bold py-2 px-3 rounded">
                            Complete
                        </button>
                    </div>
                </div>
                <!-- Add this h-1 to override a weird behavior of flex layout, 
                        see this stackoverflow answer for more details https://stackoverflow.com/q/75368940/9508684.
                        In short, the overflow proerty requries a fixed length on the container. 
                        Without a fixed length (height or width), there's nothing to trigger an overflow. 
                        The flex-grow property doesn't establish a fixed length, so it doesn't work.
                        So, to solve both problems, set the container to height: 1px. It will still grow to fill the available space.
                    -->
            </div>
            <!-- the section where users example examples and predictions -->
            <div class="flex flex-col border border-gray-600 rounded w-1/2 h-full px-3 pt-2 pb-4 gap-y-1">
                <!-- display a set of filter options -->
                <div class="header text-lg font-bold">
                    Which Texts are Caught by Selected Rubrics
                </div>
                <div class="flex flex-col items-start gap-y-1">
                    <div class="flex justify-start items-center gap-x-2 w-[60%]">
                        <div>Filters</div>
                        <div class="w-[45%]">
                            <select id="predictionFilter" class="selectpicker data-filter border rounded show-tick" title="by predictions" data-width="100%" >
                                <option value="targeted" class="text-xs text-gray-700">Targeted comments</option>
                                <option value="not-targeted" class="text-xs text-gray-700">Not Targeted comments</option>
                                <option value="all" selected class="text-xs text-gray-700">All comments</option>
                            </select>
                        </div>
                        <div class="w-[45%]">
                            <select id="promptFilter" multiple
                                class="selectpicker data-filter show-tick border rounded" 
                                title="by rubrics" 
                                data-width="100%"
                                data-selected-text-format="count"
                                data-count-selected-text="{0} rubrics selected"
                            >
                                
                            </select>
                        </div>
                    </div>
                    <div id="countDisplay" class="text-sm text-gray-700 italic self-start"></div>
                </div>
                <!-- display a list of comments to be reviewed -->
                <div id="textList" class="body flex flex-col overflow-y-auto py-2 h-1 pr-2 flex-grow ">
                </div>
                <div class="bottom flex justify-end gap-x-2 pt-3">
                    <button @click="load_more_data" class="bg-slate-500 text-white font-bold py-2 px-3 rounded">
                        Load More Examples
                    </button>
                </div>
            </div>
        </div>

        <div id="loadingModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
            <div class="relative top-1/3 mx-auto p-5 border w-fit shadow-lg rounded-md bg-white">
                <div id="loadingModalText" class="text-center text-xl">
                    Loading...
                </div>
            </div>
        </div>
    </div>
</body>
<!-- closes container -->
<!-- custom js -->
<script src="{% static 'js/sharedsteps.js' %}" defer></script>
<script defer>
    const COMPLETE_DATASET = JSON.parse(`{{dataset | safe}}`);
    const BATCH_SIZE = 30;
    const SYSTEM = "{{system}}";
    const PARTICIPANT_ID = "{{participant_id}}";
    const STAGE = "{{stage}}";
    
    var dataset = [];
    var current_batch = 0; 

    var prompts = {}
    var prompt_counter = 0; 
    /* the maximum prompt index that has been used so far, 
        we want to use it as the unique id for each prompt, 
        however, we cannot rely on the length of the prompts array as some prompts might be deleted
    */

    var selected_prompts = [];
    var selected_prediction = "all";

    function updatePriority(){
        
        $('#promptList .promptSection').each(function(index) {
            // get the id of the ruleSection
            let id = +$(this).attr('id').split('-')[1];
            prompts[id].priority = index;

            // update the priority class div of the this ruleSection
            $(this).find('.priority').text(`${index + 1}.`);
        });
    }

    function updateOptions(id, text){
        // update the options of the select picker
        prompts[id].name = text;
        $(`#promptFilter option[value=${id}]`).text(capitalize(text));
        $(".selectpicker").selectpicker('refresh');
    }

    function display_prompts(new_prompts) {
        // display data on the page
        let promptList = $('#promptList');

        new_prompts.forEach((prompt) => {
            // create a new div element for each text with the template 
            
            prompt.id = prompt_counter++;
            prompt.priority = promptList.children().length - 1;


            let prompt_div_html = `
                <div 
                    x-data="{open: false, action: ${prompt.action}}" 
                    class="promptSection flex flex-col gap-y-4 items-stretch border border-gray-300 rounded-lg px-3 pt-2 pb-4" 
                    id="prompt-${prompt.id}"
                >
                    <div class="flex justify-between">
                        <div class="grow text-black flex items-center font-serif gap-x-2">
                            <div class="priority text-2xl">
                                ${prompt.priority + 1}.
                            </div>
                            <!-- Toggle Switch for Rule Action -->
                            <div class="grow flex items-center font-medium text-xl ">
                                <button 
                                    class="removeButton grow py-2 px-4 rounded italic" 
                                    :class="{ 'active bg-red-100': action === 1, 'bg-gray-100 text-gray-300': action !== 1}" 
                                    x-on:click="action = 1"
                                >
                                    Remove
                                </button>
                                <button 
                                    class="approveButton grow py-2 px-4 rounded italic " 
                                    :class="{ 'active bg-emerald-100': action === 0, 'bg-gray-100 text-gray-300': action !== 0 }" 
                                    x-on:click="action = 0"
                                >
                                        Approve
                                </button>
                            </div>
                            <div x-data="{charLimit: 30, inputExceedsLimit: false,  text: '${prompt.name}' }" class="w-[40%] .editableSectionTitle">
                                <div 
                                    contenteditable="true" 
                                    x-text="text"
                                    x-on:input="text = $event.target.innerText; inputExceedsLimit = (text.length > charLimit); if(inputExceedsLimit) text = text.substr(0, charLimit); updateOptions(${prompt.id}, text);"
                                    class="italic font-xl border border-gray-300 p-2 rounded"
                                    :class="{'border-red-500': inputExceedsLimit}"
                                    data-placeholder="What Texts?"
                                ></div>
                                <div x-show="inputExceedsLimit" 
                                    class="text-red-600 text-sm mt-1" 
                                    x-text="'The title should be less than ' + charLimit + ' characters.'"
                                ></div>
                            </div>
                        </div>
                        <!--have a foldable button-->
                        <div class="flex justify-center gap-x-2 ml-4">
                            <button @click="deletePrompt(${prompt.id})" class="focus:outline-none">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                            <button @click="open = !open" class="focus:outline-none">
                                <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                                <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-col gap-y-2" x-show="open">
                        <div class="flex flex-col gap-y-1">
                            <div class="text-base font-medium">
                                Description
                            </div>
                            <div 
                                contenteditable="true" 
                                class="promptRubric text-base text-gray-700 bg-zinc-50 rounded p-2"
                            >
                                ${prompt.rubric}
                            </div>
                        </div>
                        <div class="flex flex-col gap-y-1">
                            <div class="text-base">
                                Examples that <span class="italic font-medium">Should</span> be targeted
                            </div>
                            <div contenteditable="true"
                                class="promptPositiveExample example bg-inherit bg-zinc-50 border-none text-sm text-gray-700 p-2">
                                ${prompt.positives.length > 0 ? prompt.positives[0] : ""}
                            </div>
                        </div>
                        <div class="flex flex-col gap-y-1">
                            <div class="text-base">
                                Examples that <span class="italic font-medium">Should Not</span> be targeted
                            </div>
                            
                            <div contenteditable="true"
                                class="promptNegativeExample example bg-inherit bg-zinc-50 border-none text-sm text-gray-700 p-2" 
                            >
                                    ${prompt.negatives.length > 0 ? prompt.negatives[0] : ""}
                            </div>
                            
                        </div>

                    </div>
                </div>`;
            $('#promptList > :last-child').before(prompt_div_html);
            prompts[prompt.id] = prompt;

            // add an option to the select picker for this prompt
            // prompts are not selected by default
            $('#promptFilter').append(`
                <option value=${prompt.id} class="text-xs">
                    ${prompt.name.length === 0 ? "Unnamed Prompt" : prompt.name}
                </option>
                `
            );

            // refresh the select picker
            $(".selectpicker").selectpicker('refresh');
            
            
        });
    }

    function addNewPrompt() {
        // read from configuring prompt panel and add this new prompt to the prompts
        let new_prompt = {
            "name": "",
            "action": 1,
            "rubric": "",
            "positives": [],
            "negatives": []
        };
        display_prompts([new_prompt]);
    }

    function deletePrompt(deleted_id) {
        // delete the prompt at index
        console.log(`deleting prompt ${deleted_id}`);
        // delete the key deleted_id from prompts
        delete prompts[deleted_id];
        
        // remove the div with the id prompt.${deleted_id}
        $(`#prompt-${deleted_id}`).remove();

        // remove the option from the select picker
        $(`#promptFilter option[value=${deleted_id}]`).remove();
        $(".selectpicker").selectpicker('refresh');

        // remove the prompt from selected_prompts if needed
        selected_prompts = selected_prompts.filter((id) => id != deleted_id);

        updatePriority();

    }
    
    /* 
        functions that handle the display of the data 
    */
    function load_more_data(new_separator=true){
        // load more data from the server
        /* get_backend(
            "/load_more_data/", 
            {'participant_id': participant_id},
            function(data){
                data = JSON.parse(data);
                dataset = display_data(data, dataset);
            }
        );*/

        let start = current_batch * BATCH_SIZE;
        let end = (current_batch + 1) * BATCH_SIZE;
        if(end >= COMPLETE_DATASET.length) end = COMPLETE_DATASET.length;
        let new_data = COMPLETE_DATASET.slice(start, end);
        dataset = display_data(new_data, dataset, new_separator);
        current_batch++;
        
    }

    function showFilteredData(){
        /* iterature through dataset and hide the datum that doesn't match the filter selected_prediction and selected_prompts */

        let expected_prediction = selected_prediction === "targeted" ? [1, 0] : selected_prediction === "not-targeted" ? [null] : [1, 0, null];
        let counter = 0;
        let targeted_counter = 0;
        let approved_counter = 0;
        let removed_counter = 0;

        console.log("selected prompts", selected_prompts);
        console.log("selected_predictions", selected_prediction);
        dataset.forEach((datum, index) => {
            let show = true;
            let now_prediction = null;
            if(expected_prediction.length < 3){
                // otherwise, regardless of what rules are selected, we all show all comments as the expectd prediction is the all
                if (selected_prompts.length > 0){
                    // only show comments that are targeted (not targeted) by all the selected rules
                    show = selected_prompts.every(prompt_id => {
                        let found_pred = datum.predictions.find(prompt => prompt.id === prompt_id);
                        return found_pred !== undefined && expected_prediction.includes(found_pred.prediction);
                    })
                } else {
                    // show all comments that are targeted (not targeted) by any of the rules
                    show = expected_prediction.includes(datum.total_prediction);
                }
            }

            if (show){
                $(`#datum-${index}`).parent().show();
                counter++;
                targeted_counter += datum.total_prediction !== null ? 1 : 0;
                approved_counter += datum.total_prediction === 0 ? 1 : 0;
                removed_counter += datum.total_prediction === 1 ? 1 : 0;
            } else{
                $(`#datum-${index}`).parent().hide();
            }
        });

        let text = ""
        if(expected_prediction.length === 3) 
            text = `There are ${targeted_counter}/${counter} targeted comments in total; among them, ${approved_counter} approved and ${removed_counter} removed`;
        else if(selected_prompts.length === 0 && selected_prediction === "targeted"){
            text = `There are ${counter} ${selected_prediction} comments in total; among them, ${approved_counter} approved and ${removed_counter} removed`;
        } else if(selected_prompts.length === 0 && selected_prediction === "not-targeted"){
            text = `There are ${counter} ${selected_prediction} comments, so they are approvedy by default`;
        } else {
            text = `
                There are ${counter} comments that are ${selected_prediction} by all of your selected prompts, ${approved_counter} approved and ${removed_counter} removed`;
        }

        $('#countDisplay').text(text);

    }

    $("#predictionFilter").on("change", function() {
        selected_prediction = $(this).val();
        showFilteredData();
        
    });

    $("#promptFilter").on("change", function() {
        selected_prompts = [$(this).val()].map((value) => +value )
        showFilteredData();
    });




    function generateExplanation(datum){
        /* generate the explanation for each prediction made by the LLMs */

        if (datum.total_prediction === null){
            return "This comment is not targeted by any of your prompts, so it will be approved by default.";
        }
        else {
            let explanation = `<p>This comment is targeted by the following prompts :</p><ul class='list-none pl-0 text-gray-600'>`;
            // iterate through the dict object and format each prompt in a new line and with italic font

            let highest_priority_id = null;
            for (let i = 0; i < datum.predictions.length; i++) {
                const pred = datum.predictions[i];
                if (pred.prediction !== null){
                    let prompt = prompts[pred.id];
                    
                    explanation += `
                        <li class="before:content-['•'] before:mr-2">
                            Priority ${i + 1}: Prompt <span class="font-medium italic font-serif">${prompt.name}</span>
                        </li>`;
                    if (highest_priority_id === null){
                        highest_priority = i;
                        highest_priority_id = pred.id;
                    }
                }
            }
            explanation += "</ul>";

            let highest_priority_prompt = prompts[highest_priority_id];
            explanation += `<br/><p>
                As the prompt <span class="font-bold italic font-serif">${highest_priority_prompt.name}</span> has the highest priority ${highest_priority + 1}, 
                this comment should be <span class="font-bold italic">${datum.total_prediction === 1 ? "removed" : "approved"}</span>.`;
            
            return explanation;
        }
    }

    function updateDataLabels(results) {
        /* update the labels of the data according to the predictions given by LLMs */
        let true_counter = 0;
        let prediction = results["prediction"];
        let texts_predictions = results["texts_predictions"];

        for (let i = 0; i < prediction.length; i++) {
            dataset[i].total_prediction = prediction[i];
            dataset[i].predictions = texts_predictions[i];
            
            // update the label according to the total prediction
            let new_class =  dataset[i].total_prediction === null ? "unLabel" :  dataset[i].total_prediction ? "trueLabel" : "falseLabel";
            const datum = $(`#datum-${i}`);
            datum.removeClass("unLabel trueLabel falseLabel");
            datum.addClass(new_class);

            // select the tooltip
            const tooltip_div = $(`#datumTooltip-${i}`);
            tooltip_div.removeClass("unLabel trueLabel falseLabel");
            tooltip_div.addClass(new_class);

            // update the tooltip content
            let explanation = generateExplanation(dataset[i]);
            // set the second child of the tooltip div to be the explanation, use innerhtml

            tooltip_div.children().eq(1).html(explanation);
            
        }
        // showFilteredData();
    }

    function parseContent() {
        /* we do not listen to the changes of the prompts actively but instead parse the content when the user clicks the complete or classify button */
        now_prompts = [];
        $("#promptList .promptSection").each(function(index){
            let id = +$(this).attr('id').split('-')[1];
            let prompt = prompts[id];
            // the name is always updated
            prompt.action = $(this).find('.approveButton').hasClass('active') ? 0 : 1;
            prompt.rubric = escape_single_quote($(this).find('.promptRubric').text().trim());
            
            let positive_example = $(this).find('.promptPositiveExample').text().trim();
            if(positive_example) prompt.positives[0] = escape_single_quote(positive_example);

            let negative_example = $(this).find('.promptNegativeExample').text().trim();
            if(negative_example) prompt.negatives[0] = escape_single_quote(negative_example);

            if(prompt.rubric.length > 0) now_prompts.push(prompt);

        });
        console.log("parsed out prompts", now_prompts);
        return now_prompts;

    }

    function trainLLM() {
        let now_prompts = parseContent();

        $('#loadingModal').removeClass('hidden');
        // add a countdown timer to the loading modal
        let estimated_time = Math.ceil(25 / 120 * now_prompts.length * dataset.length);
        let countdown_timer = setInterval(function(){
            $('#loadingModalText').html(
                `We are evaluating the performance of your filters. <br/> It is estimated to take <b>${estimated_time}</b> seconds, please wait for a moment.`
            );

            if (estimated_time <= 0) {
                clearInterval(countdown_timer);
                $('#loadingModalText').html('The evaluation is taking longer than expected, and thanks for your patience.');
            }

            estimated_time--; 
        }, 1000);

        post_backend(
            "/trainLLM/", 
            {'dataset': dataset, 'prompts': now_prompts},
            function(response){
                if(!response["status"]){
                    alert(response["message"]);
                    return;
                }
                let task_id = response.data.task_id;

                // console.log(response.data.results);
                // updateDataLabels(response.data.results);
                // showFilteredData();
                // $('#loadingModal').addClass('hidden');
                pollForResults(task_id);

            }
        );
    }

    function pollForResults(task_id) {
        const pollInterval = 1000; // Poll every second
        
        var poll = setInterval(function() {
            console.log("Polling for task results...");
            $.ajax({
                url: "/get_LLM_results/" + task_id + "/", // Adjust URL as needed
                type: "GET",
                success: function(response) {
                    if (response["status"]) {
                        console.log(response.data.results);
                        updateDataLabels(response.data.results);
                        showFilteredData();
                        $('#loadingModal').addClass('hidden');
                        
                        clearInterval(poll); // Stop polling since task is complete
                    } else {
                        console.log("Task is still processing...");
                    }
                },
                error: function() {
                    alert("Error polling for task results.");
                    clearInterval(poll); // Stop polling on error
                }
            });
        }, pollInterval);
    }

    function complete(){
        /* store the prompts written by the user */
        let now_prompts = parseContent();
        
        post_backend(
            "/store_prompts/", 
            {'prompts': now_prompts, 'participant_id': PARTICIPANT_ID, 'stage': STAGE},
            function(response){
                $('#loadingModal').removeClass('hidden');
                $('#loadingModalText').text('We are evaluating the performance of your filters, please wait for a moment.');
                if(!response["status"]){
                    alert(response["message"]);
                    $('#loadingModal').addClass('hidden');
                } else {
                    redirect("/validate_page/", {'participant_id': PARTICIPANT_ID, 'system': SYSTEM, 'stage': STAGE});
                }
                    
            }
        )
    }

    /* 
        wrap init statements inside it so that we can ensure that both functions are both loaded and executed at the point these codes are run. 
        Note that when you use defer, the scripts are executed only after the entire document has been parsed, but before the DOMContentLoaded event.
    */
    $(document).ready(function(){
        load_more_data(false);
        $("#promptList").sortable({
            animation: 150,
            filter: ".addButton",
            onEnd: function(event, ui) {
                // console.log("updating priority");
                updatePriority();
            }
        });
        if(STAGE === "update"){
            display_prompts(JSON.parse(`{{prompts | safe}}`));
        } else {
            display_prompts([
                {
                    "name": "Racial hate speech",
                    "action": 1,
                    "rubric": "Catch all texts that promote hate, discrimination, stereotypes, or violence against individuals or groups based on their race, ethnicity, or national origin.",
                    "positives": ["You are just some mad browskin because Europeans styled on your ass"],
                    "negatives": ["83% of US blacks are Christians"],
                },
                {
                    "name": "Violence calls",
                    "action": 1,
                    "rubric": "Catch all texts that directly incite violence or call for harm against specific groups or individuals",
                    "positives": ["it pleases me to know you will die"],
                    "negatives": []

                },
                {   
                    "name": "Gender hate speech",
                    "action": 1,
                    "rubric": "Catch all texts that are derogatory, demeaning, or violent towards individuals based on their gender or gender identity",
                    "positives": [],
                    "negatives": ["What didn’t the Bitch say. I hate talking to people in the morning"]
                }
            ]);
        }
    })
    

    
</script>
</html>